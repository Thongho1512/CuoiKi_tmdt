<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>C·∫≠p nh·∫≠t ƒë∆°n h√†ng - Phone Store</title>
    <style>
        /* Reset Styles */
        body {
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f4f4f4;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        
        table {
            border-collapse: collapse;
        }
        
        img {
            border: 0;
            outline: none;
            text-decoration: none;
            display: block;
        }
        
        /* Container */
        .email-container {
            max-width: 600px;
            margin: 0 auto;
            background-color: #ffffff;
        }
        
        /* Header */
        .header {
            background: linear-gradient(135deg, #4f46e5 0%, #6366f1 100%);
            padding: 40px 20px;
            text-align: center;
        }
        
        .header h1 {
            color: #ffffff;
            font-size: 32px;
            margin: 0 0 10px 0;
            font-weight: 700;
        }
        
        .header p {
            color: #e0e7ff;
            font-size: 18px;
            margin: 0;
        }
        
        /* Content */
        .content {
            padding: 40px 30px;
            background-color: #ffffff;
        }
        
        .greeting {
            font-size: 18px;
            color: #1f2937;
            margin-bottom: 20px;
            line-height: 1.6;
        }
        
        .greeting strong {
            color: #4f46e5;
        }
        
        /* Status Box */
        .status-box {
            background: linear-gradient(135deg, #f9fafb 0%, #ffffff 100%);
            border: 3px solid #e5e7eb;
            border-radius: 16px;
            padding: 35px;
            margin: 30px 0;
            text-align: center;
        }
        
        .status-icon {
            font-size: 64px;
            margin-bottom: 20px;
        }
        
        .status-label {
            font-size: 14px;
            color: #6b7280;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 10px;
            font-weight: 600;
        }
        
        .status-value {
            font-size: 32px;
            font-weight: 800;
            margin: 15px 0;
            line-height: 1.2;
        }
        
        .status-description {
            font-size: 16px;
            color: #4b5563;
            line-height: 1.6;
            margin-top: 15px;
        }
        
        /* Status Colors */
        .status-pending {
            color: #f59e0b;
            border-color: #fbbf24;
            background: linear-gradient(135deg, #fef3c7 0%, #ffffff 100%);
        }
        
        .status-confirmed {
            color: #3b82f6;
            border-color: #60a5fa;
            background: linear-gradient(135deg, #dbeafe 0%, #ffffff 100%);
        }
        
        .status-processing {
            color: #8b5cf6;
            border-color: #a78bfa;
            background: linear-gradient(135deg, #ede9fe 0%, #ffffff 100%);
        }
        
        .status-shipping {
            color: #6366f1;
            border-color: #818cf8;
            background: linear-gradient(135deg, #e0e7ff 0%, #ffffff 100%);
        }
        
        .status-delivered {
            color: #10b981;
            border-color: #34d399;
            background: linear-gradient(135deg, #d1fae5 0%, #ffffff 100%);
        }
        
        .status-completed {
            color: #059669;
            border-color: #10b981;
            background: linear-gradient(135deg, #d1fae5 0%, #ffffff 100%);
        }
        
        .status-cancelled {
            color: #ef4444;
            border-color: #f87171;
            background: linear-gradient(135deg, #fee2e2 0%, #ffffff 100%);
        }
        
        /* Info Box */
        .info-box {
            background-color: #f9fafb;
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            padding: 25px;
            margin: 25px 0;
        }
        
        .info-box h3 {
            color: #1f2937;
            font-size: 18px;
            margin: 0 0 15px 0;
            font-weight: 600;
        }
        
        .info-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 12px;
            padding-bottom: 12px;
            border-bottom: 1px solid #e5e7eb;
        }
        
        .info-row:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }
        
        .info-label {
            color: #6b7280;
            font-size: 14px;
            font-weight: 500;
        }
        
        .info-value {
            color: #1f2937;
            font-size: 14px;
            font-weight: 600;
            text-align: right;
        }
        
        /* Timeline */
        .timeline {
            margin: 30px 0;
        }
        
        .timeline h3 {
            color: #1f2937;
            font-size: 18px;
            margin: 0 0 20px 0;
            font-weight: 600;
        }
        
        .timeline-item {
            position: relative;
            padding-left: 35px;
            padding-bottom: 25px;
            border-left: 2px solid #e5e7eb;
        }
        
        .timeline-item:last-child {
            border-left: 2px solid transparent;
            padding-bottom: 0;
        }
        
        .timeline-dot {
            position: absolute;
            left: -6px;
            top: 0;
            width: 10px;
            height: 10px;
            background-color: #4f46e5;
            border-radius: 50%;
        }
        
        .timeline-dot.active {
            width: 14px;
            height: 14px;
            left: -8px;
            box-shadow: 0 0 0 4px rgba(79, 70, 229, 0.2);
        }
        
        .timeline-content {
            background-color: #f9fafb;
            padding: 15px;
            border-radius: 8px;
        }
        
        .timeline-title {
            color: #1f2937;
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 5px;
        }
        
        .timeline-time {
            color: #6b7280;
            font-size: 13px;
            margin-bottom: 8px;
        }
        
        .timeline-desc {
            color: #4b5563;
            font-size: 14px;
            line-height: 1.5;
        }
        
        /* Button */
        .button-container {
            text-align: center;
            margin: 35px 0;
        }
        
        .button {
            display: inline-block;
            padding: 16px 40px;
            background: linear-gradient(135deg, #4f46e5 0%, #6366f1 100%);
            color: #ffffff;
            text-decoration: none;
            border-radius: 8px;
            font-weight: 600;
            font-size: 16px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px rgba(79, 70, 229, 0.3);
        }
        
        .button:hover {
            box-shadow: 0 6px 16px rgba(79, 70, 229, 0.4);
            transform: translateY(-2px);
        }
        
        /* Alert */
        .alert {
            padding: 20px;
            margin: 25px 0;
            border-radius: 8px;
            border-left: 4px solid;
        }
        
        .alert-success {
            background-color: #d1fae5;
            border-color: #10b981;
        }
        
        .alert-success p {
            margin: 0;
            color: #065f46;
            font-size: 15px;
            line-height: 1.6;
        }
        
        .alert-info {
            background-color: #dbeafe;
            border-color: #3b82f6;
        }
        
        .alert-info p {
            margin: 0;
            color: #1e40af;
            font-size: 15px;
            line-height: 1.6;
        }
        
        /* Footer */
        .footer {
            background-color: #1f2937;
            padding: 30px;
            text-align: center;
        }
        
        .footer p {
            color: #9ca3af;
            font-size: 14px;
            margin: 8px 0;
            line-height: 1.6;
        }
        
        .footer strong {
            color: #ffffff;
            font-size: 16px;
        }
        
        .footer-links {
            margin-top: 20px;
        }
        
        .footer-links a {
            color: #6366f1;
            text-decoration: none;
            margin: 0 10px;
            font-size: 14px;
        }
        
        /* Responsive */
        @media only screen and (max-width: 600px) {
            .content {
                padding: 30px 20px;
            }
            
            .header h1 {
                font-size: 26px;
            }
            
            .status-box {
                padding: 25px 20px;
            }
            
            .status-value {
                font-size: 24px;
            }
            
            .status-icon {
                font-size: 48px;
            }
        }
    </style>
</head>
<body>
    <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0">
        <tr>
            <td align="center" style="padding: 20px 0;">
                <table class="email-container" role="presentation" width="600" cellspacing="0" cellpadding="0" border="0">
                    
                    <!-- Header -->
                    <tr>
                        <td class="header">
                            <h1>üì± Phone Store</h1>
                            <p>C·∫≠p nh·∫≠t ƒë∆°n h√†ng</p>
                        </td>
                    </tr>
                    
                    <!-- Content -->
                    <tr>
                        <td class="content">
                            
                            <!-- Greeting -->
                            <p class="greeting">
                                Xin ch√†o <strong th:text="${order.user.fullName}">Kh√°ch h√†ng</strong>,
                            </p>
                            
                            <p class="greeting">
                                ƒê∆°n h√†ng <strong th:text="${order.orderCode}">ORD20250101001</strong> c·ªßa b·∫°n ƒë√£ ƒë∆∞·ª£c c·∫≠p nh·∫≠t tr·∫°ng th√°i.
                            </p>
                            
                            <!-- Status Box - PENDING -->
                            <div th:if="${order.status.name() == 'PENDING'}" class="status-box status-pending">
                                <div class="status-icon">‚è≥</div>
                                <div class="status-label">Tr·∫°ng th√°i hi·ªán t·∫°i</div>
                                <div class="status-value">Ch·ªù x√°c nh·∫≠n</div>
                                <div class="status-description">
                                    ƒê∆°n h√†ng c·ªßa b·∫°n ƒëang ch·ªù ƒë∆∞·ª£c x√°c nh·∫≠n t·ª´ ch√∫ng t√¥i. 
                                    Ch√∫ng t√¥i s·∫Ω li√™n h·ªá v·ªõi b·∫°n trong th·ªùi gian s·ªõm nh·∫•t.
                                </div>
                            </div>
                            
                            <!-- Status Box - CONFIRMED -->
                            <div th:if="${order.status.name() == 'CONFIRMED'}" class="status-box status-confirmed">
                                <div class="status-icon">‚úÖ</div>
                                <div class="status-label">Tr·∫°ng th√°i hi·ªán t·∫°i</div>
                                <div class="status-value">ƒê√£ x√°c nh·∫≠n</div>
                                <div class="status-description">
                                    ƒê∆°n h√†ng c·ªßa b·∫°n ƒë√£ ƒë∆∞·ª£c x√°c nh·∫≠n th√†nh c√¥ng! 
                                    Ch√∫ng t√¥i ƒëang chu·∫©n b·ªã h√†ng cho b·∫°n.
                                </div>
                            </div>
                            
                            <!-- Status Box - PROCESSING -->
                            <div th:if="${order.status.name() == 'PROCESSING'}" class="status-box status-processing">
                                <div class="status-icon">üì¶</div>
                                <div class="status-label">Tr·∫°ng th√°i hi·ªán t·∫°i</div>
                                <div class="status-value">ƒêang chu·∫©n b·ªã h√†ng</div>
                                <div class="status-description">
                                    ƒê∆°n h√†ng c·ªßa b·∫°n ƒëang ƒë∆∞·ª£c ƒë√≥ng g√≥i c·∫©n th·∫≠n. 
                                    S·∫£n ph·∫©m s·∫Ω s·ªõm ƒë∆∞·ª£c giao cho ƒë∆°n v·ªã v·∫≠n chuy·ªÉn.
                                </div>
                            </div>
                            
                            <!-- Status Box - SHIPPING -->
                            <div th:if="${order.status.name() == 'SHIPPING'}" class="status-box status-shipping">
                                <div class="status-icon">üöö</div>
                                <div class="status-label">Tr·∫°ng th√°i hi·ªán t·∫°i</div>
                                <div class="status-value">ƒêang giao h√†ng</div>
                                <div class="status-description">
                                    ƒê∆°n h√†ng c·ªßa b·∫°n ƒëang tr√™n ƒë∆∞·ªùng giao ƒë·∫øn ƒë·ªãa ch·ªâ c·ªßa b·∫°n. 
                                    Vui l√≤ng chu·∫©n b·ªã nh·∫≠n h√†ng!
                                </div>
                            </div>
                            
                            <!-- Status Box - DELIVERED -->
                            <div th:if="${order.status.name() == 'DELIVERED'}" class="status-box status-delivered">
                                <div class="status-icon">üéâ</div>
                                <div class="status-label">Tr·∫°ng th√°i hi·ªán t·∫°i</div>
                                <div class="status-value">ƒê√£ giao h√†ng</div>
                                <div class="status-description">
                                    ƒê∆°n h√†ng ƒë√£ ƒë∆∞·ª£c giao th√†nh c√¥ng ƒë·∫øn ƒë·ªãa ch·ªâ c·ªßa b·∫°n. 
                                    C·∫£m ∆°n b·∫°n ƒë√£ mua h√†ng!
                                </div>
                            </div>
                            
                            <!-- Status Box - COMPLETED -->
                            <div th:if="${order.status.name() == 'COMPLETED'}" class="status-box status-completed">
                                <div class="status-icon">üåü</div>
                                <div class="status-label">Tr·∫°ng th√°i hi·ªán t·∫°i</div>
                                <div class="status-value">Ho√†n th√†nh</div>
                                <div class="status-description">
                                    ƒê∆°n h√†ng ƒë√£ ho√†n th√†nh! C·∫£m ∆°n b·∫°n ƒë√£ tin t∆∞·ªüng Phone Store. 
                                    Hy v·ªçng ƒë∆∞·ª£c ph·ª•c v·ª• b·∫°n l·∫ßn sau!
                                </div>
                            </div>
                            
                            <!-- Status Box - CANCELLED -->
                            <div th:if="${order.status.name() == 'CANCELLED'}" class="status-box status-cancelled">
                                <div class="status-icon">‚ùå</div>
                                <div class="status-label">Tr·∫°ng th√°i hi·ªán t·∫°i</div>
                                <div class="status-value">ƒê√£ h·ªßy</div>
                                <div class="status-description">
                                    ƒê∆°n h√†ng c·ªßa b·∫°n ƒë√£ b·ªã h·ªßy. N·∫øu c√≥ th·∫Øc m·∫Øc, vui l√≤ng li√™n h·ªá v·ªõi ch√∫ng t√¥i.
                                </div>
                            </div>
                            
                            <!-- Order Info -->
                            <div class="info-box">
                                <h3>üìã Th√¥ng tin ƒë∆°n h√†ng</h3>
                                <div class="info-row">
                                    <span class="info-label">M√£ ƒë∆°n h√†ng:</span>
                                    <span class="info-value" th:text="${order.orderCode}">ORD20250101001</span>
                                </div>
                                <div class="info-row">
                                    <span class="info-label">Ng√†y ƒë·∫∑t:</span>
                                    <span class="info-value" th:text="${#temporals.format(order.createdAt, 'dd/MM/yyyy HH:mm')}">01/01/2025 10:30</span>
                                </div>
                                <div class="info-row">
                                    <span class="info-label">T·ªïng ti·ªÅn:</span>
                                    <span class="info-value" th:text="${#numbers.formatDecimal(order.totalPrice, 0, 'COMMA', 0, 'POINT')} + ' ‚Ç´'">34,990,000 ‚Ç´</span>
                                </div>
                                <div class="info-row">
                                    <span class="info-label">Ph∆∞∆°ng th·ª©c thanh to√°n:</span>
                                    <span class="info-value" th:text="${order.paymentMethod == 'COD' ? 'COD' : 'PayPal'}">COD</span>
                                </div>
                                <div class="info-row">
                                    <span class="info-label">Tr·∫°ng th√°i thanh to√°n:</span>
                                    <span class="info-value" th:text="${order.paymentStatus == 'PAID' ? 'ƒê√£ thanh to√°n' : 'Ch∆∞a thanh to√°n'}">Ch∆∞a thanh to√°n</span>
                                </div>
                            </div>
                            
                            <!-- Shipping Info -->
                            <div class="info-box">
                                <h3>üöö Th√¥ng tin giao h√†ng</h3>
                                <div class="info-row">
                                    <span class="info-label">Ng∆∞·ªùi nh·∫≠n:</span>
                                    <span class="info-value" th:text="${order.recipientName}">Nguy·ªÖn VƒÉn A</span>
                                </div>
                                <div class="info-row">
                                    <span class="info-label">S·ªë ƒëi·ªán tho·∫°i:</span>
                                    <span class="info-value" th:text="${order.recipientPhone}">0987654321</span>
                                </div>
                                <div class="info-row">
                                    <span class="info-label">ƒê·ªãa ch·ªâ:</span>
                                    <span class="info-value" th:text="${order.shippingAddress}">123 Nguy·ªÖn Hu·ªá, Q1, TPHCM</span>
                                </div>
                            </div>
                            
                            <!-- Alert for COD Delivered -->
                            <div th:if="${order.status.name() == 'DELIVERED' and order.paymentMethod.name() == 'COD'}" class="alert alert-success">
                                <p>
                                    ‚úÖ <strong>Thanh to√°n th√†nh c√¥ng!</strong><br>
                                    B·∫°n ƒë√£ thanh to√°n <strong th:text="${#numbers.formatDecimal(order.totalPrice, 0, 'COMMA', 0, 'POINT')} + ' ‚Ç´'">34,990,000 ‚Ç´</strong> 
                                    khi nh·∫≠n h√†ng. C·∫£m ∆°n b·∫°n!
                                </p>
                            </div>
                            
                            <!-- Alert for Shipping -->
                            <div th:if="${order.status.name() == 'SHIPPING'}" class="alert alert-info">
                                <p>
                                    üì± <strong>L∆∞u √Ω:</strong> Shipper s·∫Ω li√™n h·ªá v·ªõi b·∫°n qua s·ªë ƒëi·ªán tho·∫°i 
                                    <strong th:text="${order.recipientPhone}">0987654321</strong> tr∆∞·ªõc khi giao h√†ng.
                                    Vui l√≤ng ƒë·ªÉ √Ω ƒëi·ªán tho·∫°i!
                                </p>
                            </div>
                            
                            <!-- Timeline (Optional - can be enhanced with actual tracking data) -->
                            <div class="timeline" th:if="${order.status.name() == 'SHIPPING' or order.status.name() == 'DELIVERED'}">
                                <h3>üìç L·ªô tr√¨nh giao h√†ng</h3>
                                
                                <div class="timeline-item">
                                    <div class="timeline-dot"></div>
                                    <div class="timeline-content">
                                        <div class="timeline-title">ƒê∆°n h√†ng ƒë√£ ƒë∆∞·ª£c x√°c nh·∫≠n</div>
                                        <div class="timeline-time" th:text="${#temporals.format(order.createdAt, 'dd/MM/yyyy HH:mm')}">01/01/2025 10:30</div>
                                        <div class="timeline-desc">ƒê∆°n h√†ng c·ªßa b·∫°n ƒë√£ ƒë∆∞·ª£c x√°c nh·∫≠n v√† ƒëang chu·∫©n b·ªã</div>
                                    </div>
                                </div>
                                
                                <div class="timeline-item">
                                    <div class="timeline-dot"></div>
                                    <div class="timeline-content">
                                        <div class="timeline-title">ƒêang ƒë√≥ng g√≥i s·∫£n ph·∫©m</div>
                                        <div class="timeline-time">01/01/2025 14:00</div>
                                        <div class="timeline-desc">S·∫£n ph·∫©m ƒëang ƒë∆∞·ª£c ƒë√≥ng g√≥i c·∫©n th·∫≠n</div>
                                    </div>
                                </div>
                                
                                <div class="timeline-item">
                                    <div class="timeline-dot active"></div>
                                    <div class="timeline-content">
                                        <div class="timeline-title">ƒêang v·∫≠n chuy·ªÉn</div>
                                        <div class="timeline-time">02/01/2025 08:00</div>
                                        <div class="timeline-desc">ƒê∆°n h√†ng ƒëang tr√™n ƒë∆∞·ªùng giao ƒë·∫øn b·∫°n</div>
                                    </div>
                                </div>
                                
                                <div class="timeline-item" th:if="${order.status.name() == 'DELIVERED'}">
                                    <div class="timeline-dot"></div>
                                    <div class="timeline-content">
                                        <div class="timeline-title">Giao h√†ng th√†nh c√¥ng</div>
                                        <div class="timeline-time" th:text="${#temporals.format(order.updatedAt, 'dd/MM/yyyy HH:mm')}">02/01/2025 15:30</div>
                                        <div class="timeline-desc">ƒê∆°n h√†ng ƒë√£ ƒë∆∞·ª£c giao ƒë·∫øn ƒë·ªãa ch·ªâ c·ªßa b·∫°n</div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Button -->
                            <div class="button-container">
                                <a th:href="${baseUrl + '/orders/' + order.id}" class="button">
                                    Xem chi ti·∫øt ƒë∆°n h√†ng
                                </a>
                            </div>
                            
                            <!-- Message -->
                            <p class="greeting" style="margin-top: 30px;">
                                N·∫øu b·∫°n c√≥ b·∫•t k·ª≥ th·∫Øc m·∫Øc n√†o v·ªÅ ƒë∆°n h√†ng, ƒë·ª´ng ng·∫ßn ng·∫°i li√™n h·ªá v·ªõi ch√∫ng t√¥i 
                                qua hotline <strong>1900-xxxx</strong> ho·∫∑c email <strong>support@phonestore.com</strong>
                            </p>
                            
                            <p class="greeting">
                                C·∫£m ∆°n b·∫°n ƒë√£ tin t∆∞·ªüng v√† mua s·∫Øm t·∫°i <strong>Phone Store</strong>! üíô
                            </p>
                            
                        </td>
                    </tr>
                    
                    <!-- Footer -->
                    <tr>
                        <td class="footer">
                            <p><strong>üì± Phone Store</strong></p>
                            <p>ƒêi·ªán tho·∫°i ch√≠nh h√£ng, gi√° t·ªët nh·∫•t</p>
                            <p>üìû Hotline: 1900-xxxx | ‚úâÔ∏è Email: support@phonestore.com</p>
                            <p>üìç ƒê·ªãa ch·ªâ: 123 Nguy·ªÖn Hu·ªá, Qu·∫≠n 1, TP.HCM</p>
                            
                            <div class="footer-links">
                                <a th:href="${baseUrl}">Trang ch·ªß</a>
                                <a th:href="${baseUrl + '/products'}">S·∫£n ph·∫©m</a>
                                <a th:href="${baseUrl + '/orders'}">ƒê∆°n h√†ng</a>
                                <a th:href="${baseUrl + '/contact'}">Li√™n h·ªá</a>
                            </div>
                            
                            <p style="margin-top: 20px; font-size: 12px;">
                                B·∫°n nh·∫≠n ƒë∆∞·ª£c email n√†y v√¨ c√≥ c·∫≠p nh·∫≠t v·ªÅ ƒë∆°n h√†ng t·∫°i Phone Store.<br>
                                ¬© 2025 Phone Store. All rights reserved.
                            </p>
                        </td>
                    </tr>
                    
                </table>
            </td>
        </tr>
    </table>
</body>
</html>